plugins {
    id 'application'
    id 'com.github.johnrengelman.shadow'
    id 'sablecc'
    id 'de.inetsoftware.setupbuilder'
}

sourceCompatibility = "1.8"

group "$GROUP"
version "$VERSION_NAME"

mainClassName = "tingeltangel.Tingeltangel"

dependencies {

    implementation files('lib/AbsoluteLayout-SNAPSHOT.jar')

    implementation "javazoom:jlayer:1.0.1"
    implementation "org.yaml:snakeyaml:1.15"
    implementation "org.apache.logging.log4j:log4j-1.2-api:2.3"
    // required by the sablecc generated code.
    implementation 'javax.annotation:jsr305:1.0'

    testImplementation "junit:junit:$junitVersion"
}


jar.manifest {
    attributes("Main-Class": project.mainClassName)
}

setupBuilder {
    vendor = 'Tingeltangel'
    application = "Tingeltangel"
    appIdentifier = applicationName
    version = "$VERSION_NAME"
    licenseFile = '../LICENSE'

    // icons in different sizes for different usage. you can also use a single *.ico or *.icns file
    icons = "../tingeltangel.icns"


    bundleJre = System.properties.find { it.key == "java.home" }.value

//    mainJar = "tingeltangel/build/tingeltangel-0.8.0-all.jar"


    desktopStarter {
        displayName = applicationName
        description = "This is an Application service"

        // The working directory of the service, relative to installation root
        workDir = "."

        // optional, additional arguments to start the service with
//        startArguments = "-Dawt.useSystemAAFontSettings=on -Dswing.aatext=true -Dsun.java2d.xrender=true gui-editor"

        // optional, an icon file. Defaults to setupBuilder.icons
        icons = "../tingeltangel.icns"

    }

    msi {
        languages = [ "en-US" ]
    }
}
